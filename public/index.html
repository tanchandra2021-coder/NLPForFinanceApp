<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance Sentiment Analyzer</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #000000;
            color: #FFFFFF;
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }

        /* Animated geometric background */
        .background-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            overflow: hidden;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #CCFF00;
            opacity: 0;
            animation: twinkle 3s ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.5); }
        }

        .line {
            position: absolute;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(204, 255, 0, 0.3), transparent);
            transform-origin: left center;
            opacity: 0;
            animation: drawLine 4s ease-in-out infinite;
        }

        @keyframes drawLine {
            0% { opacity: 0; width: 0; }
            50% { opacity: 1; width: 200px; }
            100% { opacity: 0; width: 0; }
        }

        .gradient-orb {
            position: absolute;
            width: 600px;
            height: 600px;
            border-radius: 50%;
            filter: blur(100px);
            opacity: 0.15;
            animation: float 20s ease-in-out infinite;
        }

        .gradient-orb.green {
            background: radial-gradient(circle, #00FF88 0%, transparent 70%);
            top: -300px;
            left: -300px;
        }

        .gradient-orb.orange {
            background: radial-gradient(circle, #FF6B35 0%, transparent 70%);
            bottom: -300px;
            right: -300px;
            animation-delay: -10s;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(50px, -50px) scale(1.1); }
            66% { transform: translate(-30px, 30px) scale(0.9); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 100px 32px;
            position: relative;
            z-index: 1;
        }

        /* Hero with animated gradient text */
        .hero {
            text-align: center;
            margin-bottom: 120px;
            animation: fadeInUp 1s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            font-size: 80px;
            font-weight: 900;
            letter-spacing: -3px;
            margin-bottom: 32px;
            line-height: 1.1;
            background: linear-gradient(135deg, #CCFF00 0%, #00FF88 50%, #FF6B35 100%);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 5s ease infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .hero-subtitle {
            font-size: 22px;
            color: rgba(255,255,255,0.5);
            font-weight: 400;
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.6;
            animation: fadeIn 1.2s ease 0.3s both;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Premium glass card */
        .glass-card {
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(40px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 32px;
            padding: 56px;
            margin-bottom: 40px;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .glass-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, transparent, rgba(204, 255, 0, 0.1), transparent);
            border-radius: 32px;
            opacity: 0;
            transition: opacity 0.5s;
            z-index: -1;
        }

        .glass-card:hover {
            background: rgba(255, 255, 255, 0.04);
            border-color: rgba(204, 255, 0, 0.3);
            transform: translateY(-8px);
            box-shadow: 0 24px 80px rgba(204, 255, 0, 0.1);
        }

        .glass-card:hover::before {
            opacity: 1;
        }

        .section-label {
            font-size: 11px;
            letter-spacing: 3px;
            text-transform: uppercase;
            color: rgba(255,255,255,0.4);
            margin-bottom: 24px;
            font-weight: 700;
        }

        /* Animated textarea */
        textarea {
            width: 100%;
            min-height: 200px;
            padding: 28px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            color: #FFFFFF;
            font-size: 17px;
            font-family: 'Inter', sans-serif;
            font-weight: 400;
            resize: vertical;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            line-height: 1.7;
        }

        textarea:focus {
            outline: none;
            background: rgba(0, 0, 0, 0.6);
            border-color: rgba(204, 255, 0, 0.5);
            box-shadow: 0 0 0 4px rgba(204, 255, 0, 0.08), 0 20px 60px rgba(0, 0, 0, 0.4);
            transform: translateY(-2px);
        }

        textarea::placeholder {
            color: rgba(255,255,255,0.25);
        }

        /* Ultra-premium button */
        .btn-primary {
            background: linear-gradient(135deg, #CCFF00 0%, #00FF88 100%);
            color: #000000;
            border: none;
            padding: 20px 64px;
            border-radius: 30px;
            font-size: 18px;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(204, 255, 0, 0.3);
            letter-spacing: 0.5px;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.6s;
        }

        .btn-primary:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 12px 48px rgba(204, 255, 0, 0.5);
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:active {
            transform: translateY(-2px) scale(0.98);
        }

        .btn-primary:disabled {
            background: rgba(255,255,255,0.08);
            color: rgba(255,255,255,0.3);
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }

        .button-container {
            text-align: center;
            margin-top: 40px;
        }

        /* Demo toggle */
        .demo-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 28px;
            color: rgba(255,255,255,0.4);
            font-size: 14px;
            cursor: pointer;
            padding: 12px 20px;
            border-radius: 16px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .demo-toggle:hover {
            background: rgba(255,255,255,0.04);
            color: rgba(255,255,255,0.6);
        }

        .demo-toggle input {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #CCFF00;
        }

        /* Loading with pulsing animation */
        .loading {
            text-align: center;
            padding: 80px;
            display: none;
        }

        .loading.show {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        .spinner-container {
            position: relative;
            width: 80px;
            height: 80px;
            margin: 0 auto 32px;
        }

        .spinner-ring {
            position: absolute;
            width: 80px;
            height: 80px;
            border: 3px solid transparent;
            border-top-color: #CCFF00;
            border-right-color: #00FF88;
            border-radius: 50%;
            animation: spin 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
        }

        .spinner-ring:nth-child(2) {
            border-top-color: #FF6B35;
            border-right-color: transparent;
            animation-delay: -0.4s;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 18px;
            color: rgba(255,255,255,0.5);
            font-weight: 500;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }

        /* Results section */
        .results {
            display: none;
        }

        .results.show {
            display: block;
            animation: fadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Sentiment hero with animated gradient */
        .sentiment-hero {
            text-align: center;
            padding: 80px 48px;
            background: linear-gradient(135deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.01) 100%);
            border-radius: 32px;
            margin-bottom: 48px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.08);
        }

        .sentiment-hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(204,255,0,0.1), transparent 30%);
            animation: rotate 10s linear infinite;
        }

        @keyframes rotate {
            to { transform: rotate(360deg); }
        }

        .sentiment-label {
            font-size: 11px;
            letter-spacing: 3px;
            text-transform: uppercase;
            color: rgba(255,255,255,0.4);
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
            font-weight: 700;
        }

        .sentiment-main {
            font-size: 72px;
            font-weight: 900;
            letter-spacing: -3px;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
            animation: scaleIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes scaleIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .sentiment-main.positive {
            background: linear-gradient(135deg, #CCFF00 0%, #00FF88 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 30px rgba(204, 255, 0, 0.3));
        }

        .sentiment-main.negative {
            background: linear-gradient(135deg, #FF6B35 0%, #FF3333 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 30px rgba(255, 107, 53, 0.3));
        }

        .sentiment-main.neutral {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 30px rgba(255, 215, 0, 0.3));
        }

        .sentiment-subtitle {
            font-size: 19px;
            color: rgba(255,255,255,0.6);
            position: relative;
            z-index: 1;
            font-weight: 400;
        }

        /* Stats grid with hover effects */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 28px;
            margin-bottom: 56px;
        }

        .stat-card {
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 24px;
            padding: 40px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .stat-card::after {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(204,255,0,0.08) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.4s;
        }

        .stat-card:hover {
            background: rgba(255,255,255,0.05);
            border-color: rgba(204,255,0,0.2);
            transform: translateY(-8px);
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .stat-card:hover::after {
            opacity: 1;
        }

        .stat-title {
            font-size: 12px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: rgba(255,255,255,0.4);
            margin-bottom: 16px;
            font-weight: 700;
        }

        .stat-value {
            font-size: 48px;
            font-weight: 800;
            color: #FFFFFF;
            letter-spacing: -2px;
        }

        .stat-value.positive { 
            background: linear-gradient(135deg, #CCFF00 0%, #00FF88 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .stat-value.negative { 
            background: linear-gradient(135deg, #FF6B35 0%, #FF3333 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Chart section */
        .chart-section {
            margin-bottom: 56px;
        }

        .chart-header {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 28px;
            color: #FFFFFF;
            letter-spacing: -1px;
        }

        .chart-wrapper {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 24px;
            padding: 48px;
            height: 400px;
            position: relative;
        }

        /* Disclaimer */
        .disclaimer {
            text-align: center;
            padding: 40px;
            color: rgba(255,255,255,0.3);
            font-size: 14px;
            line-height: 1.8;
            border-top: 1px solid rgba(255,255,255,0.05);
            font-weight: 400;
        }

        @media (max-width: 768px) {
            .container {
                padding: 60px 24px;
            }

            h1 {
                font-size: 48px;
            }

            .hero-subtitle {
                font-size: 18px;
            }

            .glass-card {
                padding: 32px 24px;
            }

            .sentiment-main {
                font-size: 52px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .chart-wrapper {
                padding: 32px 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Animated background -->
    <div class="background-animation">
        <div class="gradient-orb green"></div>
        <div class="gradient-orb orange"></div>
    </div>

    <div class="container">
        <div class="hero">
            <h1>Decode Market<br>Sentiment</h1>
            <p class="hero-subtitle">Harness AI-powered natural language processing to analyze financial news and predict market movements with precision</p>
        </div>

        <div class="glass-card">
            <div class="section-label">Input Analysis</div>
            
            <div class="demo-toggle">
                <input type="checkbox" id="demoMode">
                <span>Load example data</span>
            </div>

            <textarea id="financeText" placeholder="Enter financial news, earnings reports, market commentary, or social media posts..."></textarea>
            
            <div class="button-container">
                <button class="btn-primary" id="predictBtn">Analyze Sentiment</button>
            </div>
        </div>

        <div id="loading" class="loading">
            <div class="spinner-container">
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
            </div>
            <div class="loading-text">Analyzing market sentiment...</div>
        </div>

        <div id="results" class="results">
            <div class="sentiment-hero">
                <div class="sentiment-label">Market Sentiment</div>
                <div class="sentiment-main" id="sentimentValue"></div>
                <div class="sentiment-subtitle" id="sentimentDesc"></div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-title">Confidence</div>
                    <div class="stat-value" id="confidenceValue"></div>
                </div>
                <div class="stat-card">
                    <div class="stat-title">Price Impact</div>
                    <div class="stat-value" id="movementValue"></div>
                </div>
            </div>

            <div class="glass-card">
                <div class="chart-section">
                    <div class="chart-header">Sentiment Distribution</div>
                    <div class="chart-wrapper">
                        <canvas id="sentimentChart"></canvas>
                    </div>
                </div>

                <div class="disclaimer">
                    This analysis is provided for informational and educational purposes only. 
                    It does not constitute financial advice. Markets are inherently unpredictable—always 
                    conduct thorough research and consult with qualified professionals before making investment decisions.
                </div>
            </div>
        </div>
    </div>

    <script>
        // Generate animated stars and lines
        function createBackgroundElements() {
            const container = document.querySelector('.background-animation');
            
            // Create stars
            for (let i = 0; i < 30; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                container.appendChild(star);
            }
            
            // Create lines
            for (let i = 0; i < 15; i++) {
                const line = document.createElement('div');
                line.className = 'line';
                line.style.left = Math.random() * 100 + '%';
                line.style.top = Math.random() * 100 + '%';
                line.style.transform = `rotate(${Math.random() * 360}deg)`;
                line.style.animationDelay = Math.random() * 4 + 's';
                container.appendChild(line);
            }
        }

        createBackgroundElements();

        const textArea = document.getElementById('financeText');
        const demoCheckbox = document.getElementById('demoMode');
        const predictBtn = document.getElementById('predictBtn');
        const loading = document.getElementById('loading');
        const results = document.getElementById('results');

        demoCheckbox.addEventListener('change', function() {
            if (this.checked) {
                textArea.value = "Apple Inc. announces record-breaking Q4 earnings with revenue exceeding $120 billion, driven by strong iPhone 15 sales and robust services growth. The company exceeded analyst expectations by 15%, with CEO Tim Cook highlighting unprecedented demand in emerging markets. Stock surged 8% in after-hours trading as investors celebrated the stellar performance.";
            } else {
                textArea.value = '';
            }
        });

        predictBtn.addEventListener('click', async function() {
            const text = textArea.value.trim();
            if (!text) {
                alert('Please enter text to analyze');
                return;
            }

            loading.classList.add('show');
            results.classList.remove('show');
            this.disabled = true;

            try {
                const response = await axios.post('/api/index', { text });
                const data = response.data;
                
                displayResults(data);
                
                setTimeout(() => {
                    loading.classList.remove('show');
                    results.classList.add('show');
                }, 800);
            } catch (error) {
                console.error('Error:', error);
                alert('Analysis failed. Please try again.');
                loading.classList.remove('show');
            } finally {
                this.disabled = false;
            }
        });

        function displayResults(data) {
            const { sentiment, confidence, movement, probabilities } = data;

            const sentimentValue = document.getElementById('sentimentValue');
            sentimentValue.textContent = sentiment;
            sentimentValue.className = 'sentiment-main ' + sentiment.toLowerCase();

            const descriptions = {
                'Positive': 'Strong bullish momentum detected across multiple indicators',
                'Negative': 'Significant bearish pressure identified in market analysis',
                'Neutral': 'Mixed signals present—market outlook remains balanced'
            };
            document.getElementById('sentimentDesc').textContent = descriptions[sentiment];

            document.getElementById('confidenceValue').textContent = (confidence * 100).toFixed(0) + '%';
            
            const movementValue = document.getElementById('movementValue');
            const movementSign = movement > 0 ? '+' : '';
            movementValue.textContent = movementSign + movement.toFixed(1) + '%';
            movementValue.className = 'stat-value ' + (movement > 0 ? 'positive' : movement < 0 ? 'negative' : '');

            const ctx = document.getElementById('sentimentChart').getContext('2d');
            
            if (window.chartInstance) {
                window.chartInstance.destroy();
            }

            const gradient1 = ctx.createLinearGradient(0, 0, 0, 400);
            gradient1.addColorStop(0, 'rgba(204, 255, 0, 0.8)');
            gradient1.addColorStop(1, 'rgba(0, 255, 136, 0.3)');

            const gradient2 = ctx.createLinearGradient(0, 0, 0, 400);
            gradient2.addColorStop(0, 'rgba(255, 215, 0, 0.8)');
            gradient2.addColorStop(1, 'rgba(255, 165, 0, 0.3)');

            const gradient3 = ctx.createLinearGradient(0, 0, 0, 400);
            gradient3.addColorStop(0, 'rgba(255, 107, 53, 0.8)');
            gradient3.addColorStop(1, 'rgba(255, 51, 51, 0.3)');

            window.chartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Positive', 'Neutral', 'Negative'],
                    datasets: [{
                        data: [
                            (probabilities.positive * 100).toFixed(1),
                            (probabilities.neutral * 100).toFixed(1),
                            (probabilities.negative * 100).toFixed(1)
                        ],
                        backgroundColor: [gradient1, gradient2, gradient3],
                        borderRadius: 16,
                        barThickness: 90
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.95)',
                            padding: 20,
                            cornerRadius: 12,
                            titleFont: { size: 16, weight: '700' },
                            bodyFont: { size: 15, weight: '500' },
                            borderColor: 'rgba(204, 255, 0, 0.3)',
                            borderWidth: 1,
                            callbacks: {
                                label: function(context) {
                                    return context.parsed.y.toFixed(1) + '%';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.03)',
                                drawBorder: false
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.4)',
                                font: { size: 13, weight: '600' },
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false,
                                drawBorder: false
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.8)',
                                font: { size: 15, weight: '700' }
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
